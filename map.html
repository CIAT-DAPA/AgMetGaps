<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>AgMetGaps</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 90%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
     #custom-handle {
       width: 3em;
       height: 1.6em;
       top: 50%;
       margin-top: -.8em;
       text-align: center;
       line-height: 1.6em;
     }
    </style>


  </head>
  <body>
    <div id="map"></div>
    <div id="slider"><div id="custom-handle" class="ui-slider-handle"></div></div>
    <script>

    var month= ["DJF","JFM","FMA","MAM","AMJ","MJJ","JJA","JAS","SON","OND","NDJ"];
    $( function() {
      var handle = $( "#custom-handle" );
      $( "#slider" ).slider({
        min: 1,
        max: 12,
        value: 1,
        create: function() {
                 handle.text( month[$( this ).slider( "value" )-1] );
        },
        slide: function( event, ui ) {
                 handle.text( month[ui.value-1] );
                 refreshMap(ui.value );
        }

       });
    } );


      var historicalOverlay;
      var zoom;
      var center;
      var imageBounds = {
          north: 50,
          south: -50,
          east: 180,
          west: -180
        };

      function initMap() {
         var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: {lat: 0, lng: 0}
        });

        //Set local storage variables.
        center = map.getCenter();
        zoom = map.getZoom();
        
        google.maps.event.addListener(map,"center_changed", function() {
            //Set local storage variables.
            center = map.getCenter();
            zoom = map.getZoom();
        });
        
        google.maps.event.addListener(map,"zoom_changed", function() {
            //Set local storage variables.
           center = map.getCenter();
           zoom = map.getZoom();
        });


        historicalOverlay = new google.maps.GroundOverlay(
            '1.png',
            imageBounds);
        historicalOverlay.setMap(map);
      }
      
     function refreshMap(value) {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: zoom,
          center: center
        });




        //Set local storage variables.
        center = map.getCenter();
        zoom = map.getZoom();
        
        google.maps.event.addListener(map,"center_changed", function() {
            //Set local storage variables.
            center = map.getCenter();
            zoom = map.getZoom();
        });
        
        google.maps.event.addListener(map,"zoom_changed", function() {
            //Set local storage variables.
           center = map.getCenter();
           zoom = map.getZoom();
        });

        historicalOverlay = new google.maps.GroundOverlay(
            value+'.png',
            imageBounds);
        historicalOverlay.setMap(map);
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDzJRiWK2Iz5Ghwe7Qk-g4FDFxotEOQXtM&callback=initMap">
    </script>
  </body>
</html>