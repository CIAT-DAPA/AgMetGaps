<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>AgMetGaps</title>
	<link rel='stylesheet' id='divi-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&#038;subset=latin,latin-ext' type='text/css' media='all' />
    <link rel='stylesheet' id='et-gf-abel-css'  href='https://fonts.googleapis.com/css?family=Abel:400&#038;subset=latin' type='text/css' media='all' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/cupertino/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="../css/style.css">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #time-slider {
        margin: 10px 5% 10px 5%;
      }

     #custom-handle {
       width: 3em;
       height: 1.6em;
       top: 50%;
       margin-top: -.8em;
       text-align: center;
       line-height: 1.6em;
     }
     p {
       font-family: 'Open Sans', Helvetica, Arial, Lucida, sans-serif;
       text-align: left;
       margin: 10px 5% 10px 5%;
     }



    </style>


  </head>
  <body>
    
    
  <div class="climate-vars">

             <label>
               <input type="radio" name="radio" value="precipitation" checked/>
               <div class="precipitation box">
                 <span>Precipitation</span>
               </div>
             </label>
           
             <label>
               <input type="radio" name="radio" value="temperature"/>
               <div class="temperature box">
                 <span>Temperature</span>
               </div>
             </label>
           
             <label>
               <input type="radio" name="radio" value="grocprecipitation" />
               <div class="precipitation box">
                 <span>GROC Precipitation</span>
               </div>
             </label>
           
             <label>
               <input type="radio" name="radio" value="groctemperature"/>
               <div class="temperature box">
                 <span>GROC Temperature</span>
               </div>
             </label>
  </div>
   
  <p>Season: </p>
  <div id="time-slider"><div id="custom-handle" class="ui-slider-handle"></div></div></div>


  <div id="map"></div>




    <script>

    var month= ["DJF","JFM","FMA","MAM","AMJ","MJJ","JJA","JAS","SON","OND","NDJ"];
    
    $("input[name='radio']" ).click(function() {
         refreshMap($("input[name='radio']:checked").val(),$("#time-slider" ).slider( "value" ) );
    });


    $( function() {
      var handle = $( "#custom-handle" );
      $( "#time-slider" ).slider({
        min: 1,
        max: 12,
        value: 1,
        create: function() {
                 handle.text( month[$( this ).slider( "value" )-1] );
        },
        slide: function( event, ui ) {
                 handle.text( month[ui.value-1] );
                 refreshMap($("input[name='radio']:checked").val(),ui.value );
        }

       });
    } );


      var historicalOverlay;
      var zoom = 3;
      var center = {lat: 0, lng: 0};
      var imageBounds = {
          north: 50,
          south: -50,
          east: 180,
          west: -180
        };

      function initMap() {
        refreshMap("precipitation",1);
      }
      
     function refreshMap(climateVar,value) {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: zoom,
          center: center
        });

        //Set local storage variables.
        center = map.getCenter();
        zoom = map.getZoom();
        
        google.maps.event.addListener(map,"center_changed", function() {
            //Set local storage variables.
            center = map.getCenter();
            zoom = map.getZoom();
        });
        
        google.maps.event.addListener(map,"zoom_changed", function() {
            //Set local storage variables.
           center = map.getCenter();
           zoom = map.getZoom();
        });

        historicalOverlay = new google.maps.GroundOverlay(
            "../img/"+climateVar+'/'+value+'.png',
            imageBounds);
        historicalOverlay.setMap(map);
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDzJRiWK2Iz5Ghwe7Qk-g4FDFxotEOQXtM&callback=initMap">
    </script>
  </body>
</html>